# アーキテクチャ

## 概要

本プロジェクトでは、ドメイン駆動設計（DDD）の原則に基づき、レイヤードアーキテクチャを採用します。これにより、関心の分離を徹底し、各層が明確な役割を持つことで、保守性、拡張性、テスト容易性の高いシステムを構築します。

## レイヤードアーキテクチャの構成

システムは以下の4つの主要な層に分割されます。各層は上位の層にのみ依存し、下位の層は上位の層に依存しません。

1.  **プレゼンテーション層 (Presentation Layer)**
    *   **役割:** ユーザーインターフェース（UI）の表示とユーザーからの入力を処理します。ユーザーからのリクエストを受け取り、アプリケーション層に渡します。アプリケーション層からの結果をユーザーに表示します。
    *   **技術:** Next.js (Reactコンポーネント、ページルーティング)
    *   **責務:**
        *   UIのレンダリング
        *   ユーザーイベントのハンドリング
        *   アプリケーション層へのリクエストの委譲
        *   アプリケーション層からのデータの表示

2.  **アプリケーション層 (Application Layer)**
    *   **役割:** ユースケースを表現し、ドメイン層とプレゼンテーション層の橋渡しをします。ドメインオブジェクトの操作を調整し、トランザクション管理やセキュリティなどの横断的な関心を扱います。ドメインロジック自体は持ちません。
    *   **技術:** TypeScript
    *   **責務:**
        *   ユースケースの実行フローの制御
        *   ドメイン層のオブジェクトの協調
        *   トランザクションの開始とコミット
        *   データ永続化の調整（リポジトリの使用）

3.  **ドメイン層 (Domain Layer)**
    *   **役割:** ビジネスロジックの核心であり、ドメインの知識をカプセル化します。エンティティ、値オブジェクト、集約、ドメインサービス、リポジトリインターフェースなどが含まれます。この層は他のどの層にも依存しません。
    *   **技術:** TypeScript
    *   **責務:**
        *   ドメインの概念とルールを表現
        *   ビジネスロジックの実行
        *   ドメインオブジェクトの整合性の維持

4.  **インフラストラクチャ層 (Infrastructure Layer)**
    *   **役割:** 技術的な詳細を扱い、上位層の要求を満たすための汎用的なサービスを提供します。データ永続化（データベースアクセス）、外部サービスとの連携、フレームワークの詳細などが含まれます。ドメイン層で定義されたリポジトリインターフェースの実装はこの層に配置されます。
    *   **技術:** TypeScript, データベース（未定、必要に応じて選定）
    *   **責務:**
        *   データ永続化の実装
        *   外部システムとの通信
        *   共通ユーティリティの提供
        *   フレームワーク固有のコード

## 依存関係

*   プレゼンテーション層 → アプリケーション層
*   アプリケーション層 → ドメイン層、インフラストラクチャ層（インターフェース経由）
*   ドメイン層 → どの層にも依存しない
*   インフラストラクチャ層 → ドメイン層（インターフェースの実装）

このアーキテクチャにより、ドメインロジックが他の技術的な詳細から独立し、ビジネスの変化に柔軟に対応できるシステムを目指します。
